<!DOCTYPE html>

<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            .sombra{
                color: white; 
                text-shadow: black 0.1em 0.1em 0.2em;
            }
        </style>
    </head>
    <body onload="gen()">
        <input type="button" value="Random Color" onclick="randomColor()">
        <input id="tam" placeholder="Tamaño" type="number" min="0" onclick="changeFontSize(this.value)">
        <h1 class="sombra">Test Javascript</h1>
        
        
        
        <!-- Calculadora Javascript -->
        <input placeholder="Primer número: " type="number" onkeyup="calc()" id="num1">

        <select onchange="calc()" id="operador">
            <option>+</option>
            <option>-</option>
            <option>/</option>
            <option>*</option>
        </select>

        <input placeholder="Segundo número: " type="number" onkeyup="calc()" id="num2">
        =
        <input placeholder="Resultado" type="text" id="res" readonly>
        <div id="notes"></div>
        <!-- Calculadora Javascript -->
        
        
        
        <!-- Colores -->
        <div id="rgb"></div>
        <div id="rgbProgress">
            <progress id="rp" max="255"></progress><span id="r"></span><br>
            <progress id="gp" max="255"></progress><span id="g"></span><br>
            <progress id="bp" max="255"></progress><span id="b"></span><br>
        </div>
        <!-- Colores -->
        
        
        
        <script>
            (function(){
                // esta función se llama apenas se cargue la página
            })();
            
            
            function calc() {
                var num1 = document.getElementById("num1").value;
                var num2 = document.getElementById("num2").value;
                var operador = document.getElementById("operador").value;
                var res = document.getElementById("res");
                var notes = document.getElementById("notes");

                if (num1 === "")
                    num1 = 0;

                if (num2 === "")
                    num2 = 0;

                num1 = parseFloat(num1);
                num2 = parseFloat(num2);

                var operacion;
                switch (operador) {
                    case "+":
                        res.value = num1 + num2;
                        operacion = "suma";
                        break;
                    case "-":
                        res.value = num1 - num2;
                        operacion = "resta";
                        break;
                    case "/":
                        res.value = num1 / num2;
                        operacion = "división";
                        break;
                    default:
                        res.value = num1 * num2;
                        operacion = "multiplicación";
                }

                notes.innerHTML = "Primer número: " + num1;
                notes.innerHTML += "<br>";
                notes.innerHTML += "Segundo número:  " + num2;
                notes.innerHTML += "<br>";
                notes.innerHTML += "operación: " + operacion;

                if (res.value >= 0) {
                    res.style.backgroundColor = "green";
                    res.style.color = "#FFFFFF";
                } else {
                    res.style.backgroundColor = "red";
                    res.style.color = "#FFFFFF";
                }
            }

            function changeFontSize(size) {
                document.getElementById("num1").style.fontSize = size + "px";
                document.getElementById("num2").style.fontSize = size + "px";
                document.getElementById("res").style.fontSize = size + "px";
                document.getElementById("notes").style.fontSize = size + "px";
                document.getElementById("operador").style.fontSize = size + "px";
            }

            function randomColor() {
                var r = Math.floor((Math.random() * 255) + 0);
                var g = Math.floor((Math.random() * 255) + 0);
                var b = Math.floor((Math.random() * 255) + 0);

                console.log(r + "-" + g + "-" + b);

                document.body.style.backgroundColor = "rgb(" + r + "," + g + "," + b + ")";
            }

            // https://stackoverflow.com/questions/951021/what-is-the-javascript-version-of-sleep
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
 
            var pause = 30;
            var step = 1;
            var r = 255;
            var g = 0;
            var b = 0;
            
            async function gen() {
                /*while (true) {
                 randomColor();
                 await sleep(1000);
                 }*/
                while(true){
                    // sube el verde
                    for (g = 0; g <= 255; g = g + step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }
                    g = g - step;

                    // baja el rojo
                    for (r = 255; r >= 0; r = r - step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }
                    r = r + step;

                    // sube el azul
                    for (b = 0; b <= 255; b = b + step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }

                    b = b - step;

                    // baja el verde
                    for (g = 255; g >= 0; g = g - step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }

                    g = g + step;


                    // sube el rojo
                    for (r = 0; r <= 255; r = r + step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }
                    r = r - step;

                    // baja el azul
                    for (b = 255; b >= 0; b = b - step) {
                        printRgb();
                        document.body.style.backgroundColor = "rgb("+r+","+g+","+b+")";
                        await sleep(pause);
                    }

                    b = b + step;
                }
                
            }
            
            function printRgb(){
                document.getElementById("r").innerHTML = "Rojo: "+r;
                document.getElementById("g").innerHTML = "Verde: "+g;
                document.getElementById("b").innerHTML = "Azul: "+b;
                
                document.getElementById("rp").value = r;
                document.getElementById("gp").value = g;
                document.getElementById("bp").value = b;
            }

        </script>
    </body>
</html>
